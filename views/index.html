{{extend './_layouts/home.html'}}

{{block 'title'}}{{'多人博客 - 首页'}}{{/block}}

{{block 'body'}}
<section class="container">
  <ul class="media-list inner">

    <li class="media">
      <div class="media-left">
        <a href="#">
          <img width="40" height="40" class="media-object" src="../public/img/avatar-max-img.png" alt="...">
        </a>
      </div>
      <div class="media-body">
        <h4 class="media-heading"><a href="/topics/show.html">Media heading</a></h4>
        <p>sueysok 回复了问题 • 2 人关注 • 1 个回复 • 187 次浏览 • 2019-10-20 13:45</p>
      </div>
    </li>

  </ul>
  <nav aria-label="Page navigation">
    <ul class="pagination">
      <li>
        <a href="#" aria-label="Previous">
        <span aria-hidden="true">&laquo;</span>
      </a>
      </li>
      <li class="active"><a href="#">1</a></li>
      <li><a href="#">2</a></li>
      <li><a href="#">3</a></li>
      <li><a href="#">4</a></li>
      <li><a href="#">5</a></li>
      <li>
        <a href="#" aria-label="Next">
        <span aria-hidden="true">&raquo;</span>
      </a>
      </li>
    </ul>
  </nav>
</section>

<script src="/node_modules/jquery/dist/jquery.js"></script>

<script>
  $( function() {
    $.ajax({
      type: 'get',
      url: '/userPushInfo',
      success: function (data) {
        // console.log(data)
        if (data.err_code === 0) {
          // console.log(data)
          for (let i = 0; i < data.message.length; i++) {
            let datas = data.message[i]
            $('.inner').prepend(`
             <li class="media">
              <div class="media-left">
                  <a href="#">
                    <img width="40" height="40" class="media-object" src="../public/img/avatar-max-img.png" alt="...">
                  </a>
               </div>
               <div class="media-body box-content">
               <h4 class="media-heading"><a href="/show">${datas.title}</a></h4>
               <p>${datas.article}</p>
               <p>${datas.author} | ${datas.show_time}</p>
              </div>
             </li>
       `
                    // <span class="userContent">内容：${datas.content}</span>
            )
          }
        }
        if ($('.userNickname').text() === 'undefined') {
          $(this).text = ''
        }

      }
    })
  })
</script>

{{/block}}
